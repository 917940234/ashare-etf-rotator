# A股ETF周频轮动（前后端分离：FastAPI + Next.js）

> 仅供个人学习研究自用，不构成投资建议，不用于商业用途。市场有风险，投资需谨慎。

这是一个“周频（每周一次）A股场内ETF轮动”项目：
- **核心逻辑（core）**：AKShare 拉取ETF日线并本地 Parquet 缓存；bt 回测；纸交易记账；quantstats 报告。
- **后端（backend）**：FastAPI 提供统一 API（更新数据/回测/周计划/纸交易/配置/日志/报告下载）。
- **前端（frontend）**：Next.js + shadcn/ui 中文控制台（按钮式操作、配置编辑、报告/日志查看）。

## 一键启动（WSL/Ubuntu）
在项目根目录执行：
```bash
bash scripts/start.sh
```

启动后打开：
- 前端 UI：`http://127.0.0.1:3000`
- 后端 API：`http://127.0.0.1:8000/api/health`

## 登录方式（不允许注册）
系统只允许固定账号登录（后端写死、已加密校验）：
- 用户名：`永恒的谜团`
- 密码：`Welcome1234`

## 你在控制台里要做的事（新手只记这三步）
1) **更新数据**：把ETF日线拉到本地缓存（保证可复现）。
2) **生成周计划（周五）**：给出下周目标权重（你用券商APP手动下单）。
3) **运行纸交易（下周一收盘后）**：用统一假设“记账一次”，生成交易清单与纸账户净值。

“运行回测”用于偶尔验证策略历史表现与成本影响，不需要每周都跑。

## 目录结构
```text
core/       策略核心（AKShare + bt + quantstats + 纸交易）
backend/    FastAPI 服务（登录、任务、配置、产物、日志）
frontend/   Next.js 中文控制台（shadcn/ui）
config/     配置文件（config.yaml）
data/       本地缓存与纸账户（运行后生成）
reports/    报告/计划单/交易清单（运行后生成）
logs/       日志（运行后生成）
scripts/    一键启动脚本
```

## 成本模型说明（重要）
项目会近似计入：
- 佣金（按成交额比例 + 单笔最低 5 元）
- 卖出印花税
- 滑点（bps）

这些参数都在 `config/config.yaml` 的 `costs` 中可调；实际券商费用以券商为准。

